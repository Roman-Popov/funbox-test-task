(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),s=a.n(o),l=a(6),d=a(1),c=a(2),i=a(4),m=a(3),u=a(5),p=(a(15),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).expandList=function(e){e.classList.toggle("visible")},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.nodes,n=t.addNode,o=t.removeNode,s=t.dragStart,l=t.dragOver,d=t.dragEnd;return r.a.createElement("div",{className:"control-panel"},r.a.createElement("form",{id:"add-node",onSubmit:n},r.a.createElement("label",{title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u0442\u043e\u0447\u043a\u0438",htmlFor:"placemark-name"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0442\u043e\u0447\u043a\u0443:"),r.a.createElement("div",{className:"input-wrapper"},r.a.createElement("input",{id:"placemark-name",type:"text",autoComplete:"off",required:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0447\u043a\u0438"}),r.a.createElement("button",{type:"submit",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"},"+"))),r.a.createElement("h3",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0447\u0435\u043a"),0===a.length?r.a.createElement("span",null,"\u0422\u043e\u0447\u0435\u043a \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"):r.a.createElement("ol",{className:"node-list"},a.map(function(e,t){return r.a.createElement("li",{key:t,className:"node-item",onDragOver:function(e){return l(e,t)}},r.a.createElement("div",{className:"drag",draggable:!0,onDragStart:function(e){return s(e,t)},onDragEnd:d},r.a.createElement("div",{className:"arrows"}),r.a.createElement("div",{className:"substrate"}),r.a.createElement("div",{className:"bar"}),r.a.createElement("div",{className:"bar"}),r.a.createElement("div",{className:"bar"})),r.a.createElement("span",{className:"node-name"},e.name),r.a.createElement("button",{className:"delete-node",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u043e\u0447\u043a\u0443",onClick:function(){return o(e.placemark)}},r.a.createElement("i",{className:"bar"}),r.a.createElement("i",{className:"bar"})))})),r.a.createElement("div",{id:"expand-note",onClick:function(t){return e.expandList(t.currentTarget.parentNode)}},r.a.createElement("span",null,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0442\u043e\u0447\u0435\u043a")),r.a.createElement("button",{id:"expand-list",onClick:function(t){return e.expandList(t.currentTarget.parentNode)}},r.a.createElement("span",{className:"expand-arrow"})),r.a.createElement("button",{className:"run-tests",onClick:function(){return setTimeout(function(){window.startTests(),document.querySelector(".jasmine_html-reporter").scrollIntoView()},1)}},"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0442\u0435\u0441\u0442\u044b"))}}]),t}(n.Component)),g=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={nodes:[],draggedItem:null,markedItem:null},a.addNode=function(e){e.preventDefault();var t=window.ymaps,n=window.map,r=n.getCenter(),o=Object(l.a)(a.state.nodes),s=window.polyline,d=s.geometry.getLength(),c=document.getElementById("placemark-name"),i=c.value,m=new t.Placemark(r,{index:d,balloonContent:'<div class="balloon-body">\n                            <span>'.concat(i,"</span>\n                        </div>")},{preset:"islands#blueDotIcon",draggable:!0}),u={placemark:m,name:i};m.events.add("dragend",function(){return a.changeCoordinates(m)}).add("mouseenter",function(){return m.options.set("preset","islands#redDotIcon")}).add(["mouseleave","balloonclose"],function(){return m.options.set("preset","islands#blueDotIcon")}),c.value="",n.geoObjects.add(m),s.geometry.set(d,r),o.push(u),a.setState({nodes:o})},a.removeNode=function(e){var t=window.map,n=window.polyline,r=Object(l.a)(a.state.nodes),o=e.properties.get("index");t.geoObjects.remove(e),n.geometry.remove(o),r.splice(o,1),r.forEach(function(e,t){return e.placemark.properties.set("index",t)}),a.setState({nodes:r})},a.changeCoordinates=function(e){var t=window.polyline,a=e.geometry.getCoordinates(),n=e.properties.get("index");t.geometry.set(n,a)},a.onDragStart=function(e,t){var n=a.state.nodes[t];e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.parentNode),e.dataTransfer.setDragImage(e.target.parentNode,20,20),a.setState({draggedItem:n})},a.onDragOver=function(e,t){e.preventDefault();var n=a.state,r=n.nodes,o=n.draggedItem,s=n.markedItem,l=r[t];if(o!==l){var d=r.filter(function(e){return e!==o});d.splice(t,0,o),s&&s.classList.remove("dragged"),e.currentTarget.classList.add("dragged"),a.setState({nodes:d,markedItem:e.currentTarget})}},a.onDragEnd=function(){var e=a.state,t=e.nodes,n=e.markedItem,r=window.polyline;t.forEach(function(e,t){e.placemark.properties.set("index",t),r.geometry.set(t,e.placemark.geometry.getCoordinates())}),n&&n.classList.remove("dragged"),a.setState({draggedItem:null,markedItem:null})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=window.ymaps;e.ready(function(){var t=new e.Map("map",{center:[55.76,37.64],zoom:10}),a=new e.Polyline([]);t.geoObjects.add(a),window.map=t,window.polyline=a})}},{key:"render",value:function(){var e=this.state.nodes;return r.a.createElement("div",{className:"App"},r.a.createElement(p,{nodes:e,addNode:this.addNode,removeNode:this.removeNode,dragStart:this.onDragStart,dragOver:this.onDragOver,dragEnd:this.onDragEnd}),r.a.createElement("div",{id:"map",style:{width:"100%",height:"100%"}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports=a(17)}},[[9,2,1]]]);
//# sourceMappingURL=main.cb0c853b.chunk.js.map